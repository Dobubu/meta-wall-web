import{_ as P,d as S,u as U,r as f,a as D,b as I,c as u,e as r,t as c,F as p,w,v as b,f as t,g as y,h as x,i as B,j as $,p as M,k as j,l as A,m as N,n as q,o as n,q as v,s as F,x as z}from"./index.05380d9b.js";const E=m=>(M("data-v-2307bc32"),m=m(),j(),m),T={class:"bg",h:"screen",bg:"repeat",display:"flex justify-center items-center"},R={w:"869px",bg:"dark-100",shadow:"main",p:"y-96px x-50px",display:"flex justify-between items-center",border:"2 dark-500"},W=E(()=>r("div",{class:"login-bg",h:"350px",w:"350px",bg:"center no-repeat contain"},null,-1)),G={action:".",display:"flex flex-col",text:"center"},H=E(()=>r("h1",{class:"meta-primary-text",leading:"text",text:"60px",font:"paytone bold"},"MetaWall",-1)),J={m:"b-9",text:"24px dark-500",font:"helvetica bold"},K={m:"b-4",text:"14px danger"},O=["disabled","onClick"],Q=A(" \u767B\u5165 "),X=["disabled","onClick"],Y=A(" \u8A3B\u518A "),Z=S({setup(m){const _=N(),l=U(),d=f(!0),g=f(""),e=D({name:"",email:"",password:""}),V={name:{required:v,minLength:F(2)},email:{required:v,email:z},password:{required:v,minLength:F(8)}},o=I(V,e),k=()=>{d.value=!d.value,o.value.$reset(),g.value="",e.name="",e.email="",e.password=""},C=async()=>{try{if(!await o.value.$validate()||!e.name||!e.email||!e.password)throw new Error("\u4E0A\u8FF0\u6B04\u4F4D\u6709\u8AA4\uFF01");const s={name:e.name,email:e.email,password:e.password};await l.signUp(s),await _.push({name:"Post"}),alert("\u8A3B\u518A\u3001\u767B\u5165\u6210\u529F\uFF01")}catch(i){g.value=i.message}},L=async()=>{try{const i=await o.value.email.$validate(),s=await o.value.password.$validate();if(!i||!s||!e.email||!e.password)throw new Error("\u4E0A\u8FF0\u6B04\u4F4D\u6709\u8AA4\uFF01");const h={email:e.email,password:e.password};await l.login(h),await _.push({name:"Post"}),alert("\u767B\u5165\u6210\u529F\uFF01")}catch(i){g.value=i.message}};return(i,s)=>{const h=q("font-awesome-icon");return n(),u("div",T,[r("div",R,[W,r("div",null,[r("form",G,[H,r("h2",J,c(d.value?"\u5230\u5143\u5B87\u5B99\u5C55\u958B\u5168\u65B0\u793E\u4EA4\u5708":"\u8A3B\u518A"),1),d.value?x("",!0):(n(),u(p,{key:0},[w(r("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t(e).name=a),"data-cy":"register-name",type:"text",w:"373px",h:"51px",border:"2 dark-500",m:"b-4",placeholder:"\u66B1\u7A31",onBlur:s[1]||(s[1]=(...a)=>t(o).name.$touch&&t(o).name.$touch(...a))},null,544),[[b,t(e).name]]),(n(!0),u(p,null,y(t(o).name.$errors,a=>(n(),u("span",{key:a.$uid,m:"b-4 -t-2",text:"14px danger left"},c(a.$message),1))),128))],64)),w(r("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t(e).email=a),"data-cy":"auth-email",type:"text",w:"373px",h:"51px",border:"2 dark-500",m:"b-4",placeholder:"Email",onBlur:s[3]||(s[3]=(...a)=>t(o).email.$touch&&t(o).email.$touch(...a))},null,544),[[b,t(e).email]]),(n(!0),u(p,null,y(t(o).email.$errors,a=>(n(),u("span",{key:a.$uid,"data-cy":"auth-email-error",m:"b-4 -t-2",text:"14px danger left"},c(a.$message),1))),128)),w(r("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>t(e).password=a),"data-cy":"auth-password",type:"password",w:"373px",h:"51px",border:"2 dark-500",m:"b-8",placeholder:"Password",onBlur:s[5]||(s[5]=(...a)=>t(o).password.$touch&&t(o).password.$touch(...a))},null,544),[[b,t(e).password]]),(n(!0),u(p,null,y(t(o).password.$errors,a=>(n(),u("span",{key:a.$uid,m:"b-4 -t-6",text:"14px danger left"},c(a.$message),1))),128)),r("span",K,c(g.value),1),d.value?(n(),u(p,{key:1},[d.value?(n(),u("button",{key:0,class:"meta-primary",transition:"duration-base",type:"submit",p:"y-4",m:"b-4",border:"2 dark-500 rounded-8px",disabled:t(l).loading.auth,onClick:B(L,["prevent"])},[Q,t(l).loading.auth?(n(),$(h,{key:0,icon:["fa","circle-notch"],pulse:"",size:"lg",m:"l-2"})):x("",!0)],8,O)):x("",!0),r("span",{"data-cy":"toggle-register",cursor:"pointer",text:"center",display:"block",onClick:k}," \u8A3B\u518A\u5E33\u865F ")],64)):(n(),u(p,{key:2},[r("button",{type:"submit","data-cy":"register-btn",class:"meta-primary",transition:"duration-base",p:"y-4",m:"b-4",border:"2 dark-500 rounded-8px",disabled:t(l).loading.auth,onClick:B(C,["prevent"])},[Y,t(l).loading.auth?(n(),$(h,{key:0,icon:["fa","circle-notch"],pulse:"",size:"lg",m:"l-2"})):x("",!0)],8,X),r("span",{cursor:"pointer",text:"center",display:"block",onClick:k}," \u767B\u5165 ")],64))])])])])}}});var ae=P(Z,[["__scopeId","data-v-2307bc32"]]);export{ae as default};
