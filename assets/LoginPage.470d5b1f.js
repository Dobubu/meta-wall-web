import{_ as P,d as S,u as U,r as f,a as D,b as I,c as i,e as n,t as c,F as p,w as v,v as b,f as t,g as x,h as w,i as B,j as $,p as M,k as j,l as A,m as N,n as q,o as r,q as y,s as F,x as z}from"./index.f6b6b27e.js";var T="/meta-wall-web/assets/login.ca825f49.svg";const E=m=>(M("data-v-41e0f6b0"),m=m(),j(),m),R={class:"bg",h:"screen",bg:"repeat",display:"flex justify-center items-center"},W={w:"869px",bg:"dark-100",shadow:"main",p:"y-96px x-50px",display:"flex justify-between",border:"2 dark-500"},G=E(()=>n("img",{alt:"login background",src:T},null,-1)),H={action:".",display:"flex flex-col",text:"center"},J=E(()=>n("h1",{leading:"text",text:"60px primary",font:"paytone bold"},"MetaWall",-1)),K={m:"b-9",text:"24px dark-500",font:"helvetica bold"},O={m:"b-4",text:"14px danger"},Q=["disabled","onClick"],X=A(" \u767B\u5165 "),Y=["disabled","onClick"],Z=A(" \u8A3B\u518A "),ee=S({setup(m){const _=N(),l=U(),d=f(!0),g=f(""),e=D({name:"",email:"",password:""}),V={name:{required:y,minLength:F(2)},email:{required:y,email:z},password:{required:y,minLength:F(8)}},o=I(V,e),k=()=>{d.value=!d.value,o.value.$reset(),g.value="",e.name="",e.email="",e.password=""},C=async()=>{try{if(!await o.value.$validate()||!e.name||!e.email||!e.password)throw new Error("\u4E0A\u8FF0\u6B04\u4F4D\u6709\u8AA4\uFF01");const s={name:e.name,email:e.email,password:e.password};await l.signUp(s),await _.push({name:"Post"}),alert("\u8A3B\u518A\u3001\u767B\u5165\u6210\u529F\uFF01")}catch(u){g.value=u.message}},L=async()=>{try{const u=await o.value.email.$validate(),s=await o.value.password.$validate();if(!u||!s||!e.email||!e.password)throw new Error("\u4E0A\u8FF0\u6B04\u4F4D\u6709\u8AA4\uFF01");const h={email:e.email,password:e.password};await l.login(h),await _.push({name:"Post"}),alert("\u767B\u5165\u6210\u529F\uFF01")}catch(u){g.value=u.message}};return(u,s)=>{const h=q("font-awesome-icon");return r(),i("div",R,[n("div",W,[G,n("div",null,[n("form",H,[J,n("h2",K,c(d.value?"\u5230\u5143\u5B87\u5B99\u5C55\u958B\u5168\u65B0\u793E\u4EA4\u5708":"\u8A3B\u518A"),1),d.value?w("",!0):(r(),i(p,{key:0},[v(n("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t(e).name=a),"data-cy":"register-name",type:"text",w:"373px",h:"51px",border:"2 dark-500",m:"b-4",placeholder:"\u66B1\u7A31",onBlur:s[1]||(s[1]=(...a)=>t(o).name.$touch&&t(o).name.$touch(...a))},null,544),[[b,t(e).name]]),(r(!0),i(p,null,x(t(o).name.$errors,a=>(r(),i("span",{key:a.$uid,m:"b-4 -t-2",text:"14px danger left"},c(a.$message),1))),128))],64)),v(n("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t(e).email=a),"data-cy":"auth-email",type:"text",w:"373px",h:"51px",border:"2 dark-500",m:"b-4",placeholder:"Email",onBlur:s[3]||(s[3]=(...a)=>t(o).email.$touch&&t(o).email.$touch(...a))},null,544),[[b,t(e).email]]),(r(!0),i(p,null,x(t(o).email.$errors,a=>(r(),i("span",{key:a.$uid,"data-cy":"auth-email-error",m:"b-4 -t-2",text:"14px danger left"},c(a.$message),1))),128)),v(n("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>t(e).password=a),"data-cy":"auth-password",type:"password",w:"373px",h:"51px",border:"2 dark-500",m:"b-8",placeholder:"Password",onBlur:s[5]||(s[5]=(...a)=>t(o).password.$touch&&t(o).password.$touch(...a))},null,544),[[b,t(e).password]]),(r(!0),i(p,null,x(t(o).password.$errors,a=>(r(),i("span",{key:a.$uid,m:"b-4 -t-6",text:"14px danger left"},c(a.$message),1))),128)),n("span",O,c(g.value),1),d.value?(r(),i(p,{key:1},[d.value?(r(),i("button",{key:0,transition:"duration-base",type:"submit",bg:"primary hover:active",p:"y-4",m:"b-4",text:"white hover:dark-500",border:"2 dark-500 rounded-8px",disabled:t(l).loading.auth,onClick:B(L,["prevent"])},[X,t(l).loading.auth?(r(),$(h,{key:0,icon:["fa","circle-notch"],pulse:"",size:"lg",m:"l-2"})):w("",!0)],8,Q)):w("",!0),n("span",{"data-cy":"toggle-register",cursor:"pointer",text:"center",display:"block",onClick:k}," \u8A3B\u518A\u5E33\u865F ")],64)):(r(),i(p,{key:2},[n("button",{type:"submit","data-cy":"register-btn",transition:"duration-base",bg:"primary hover:active",p:"y-4",m:"b-4",text:"white hover:dark-500",border:"2 dark-500 rounded-8px",disabled:t(l).loading.auth,onClick:B(C,["prevent"])},[Z,t(l).loading.auth?(r(),$(h,{key:0,icon:["fa","circle-notch"],pulse:"",size:"lg",m:"l-2"})):w("",!0)],8,Y),n("span",{cursor:"pointer",text:"center",display:"block",onClick:k}," \u767B\u5165 ")],64))])])])])}}});var te=P(ee,[["__scopeId","data-v-41e0f6b0"]]);export{te as default};
